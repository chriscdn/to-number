{"version":3,"file":"to-number.cjs","sources":["../src/index.ts"],"sourcesContent":["/**\n * Converts an unknown value to a numeric type (integer or float).\n * `NaN`, `Infinity`, and `-Infinity` are considered non-numeric and return `null`.\n *\n * @param {unknown} input - The value to convert.\n * @returns {number | null} The numeric value, or `null` if conversion fails.\n */\n\nenum RoundingMode {\n  NONE = \"none\",\n  FLOOR = \"floor\",\n  CEIL = \"ceil\",\n  ROUND = \"round\",\n}\n\nconst toNumber = (\n  input: unknown,\n  options?: { roundingMode?: RoundingMode; digits?: number },\n) => {\n  const roundingMode = options?.roundingMode ?? RoundingMode.NONE;\n  const digits = options?.digits ?? 0;\n\n  const cast = isNumber(input) ? input : parseFloat(String(input));\n\n  if (isNumber(cast)) {\n    switch (roundingMode) {\n      case RoundingMode.FLOOR:\n        return floor(cast, { digits });\n      case RoundingMode.CEIL:\n        return ceil(cast, { digits });\n      case RoundingMode.ROUND:\n        return round(cast, { digits });\n      default:\n        return cast;\n    }\n  } else {\n    return null;\n  }\n};\n\nconst toInteger = (input: unknown) =>\n  toNumber(input, { roundingMode: RoundingMode.FLOOR });\n\n/**\n * Rounds a floating-point number to the specified number of decimal digits.\n *\n * @param {number} num - The number to round.\n * @param {{ digits: number }} [options={ digits: 0 }] - An options object specifying the number of decimal digits to keep.\n * @returns {number} The rounded number.\n */\nconst round = (\n  num: number,\n  options: { digits: number } = { digits: 0 },\n) => {\n  const factor = 10 ** options.digits;\n  return Math.round(num * factor) / factor;\n};\n\nconst floor = (\n  num: number,\n  options: { digits: number } = { digits: 0 },\n) => {\n  const factor = 10 ** options.digits;\n  return Math.floor(num * factor) / factor;\n};\n\nconst ceil = (\n  num: number,\n  options: { digits: number } = { digits: 0 },\n) => {\n  const factor = 10 ** options.digits;\n  return Math.ceil(num * factor) / factor;\n};\n\n/**\n * Checks if the given value is an integer.\n *\n * Note: `NaN`, `Infinity`, and `-Infinity` are considered invalid.\n *\n * @param {unknown} value - The value to check.\n * @returns {value is number} True if the value is a finite integer, otherwise false.\n */\nconst isInteger = (value: unknown): value is number =>\n  typeof value === \"number\" && Number.isInteger(value);\n\n/**\n * Checks if the given value is a floating-point number (non-integer).\n *\n * Note: `NaN`, `Infinity`, and `-Infinity` are considered invalid.\n *\n * @param {unknown} value - The value to check.\n * @returns {value is number} True if the value is a finite float, otherwise false.\n */\nconst isFloat = (value: unknown): value is number =>\n  typeof value === \"number\" && !Number.isInteger(value);\n\n/**\n * Checks if the given value is a finite number (integer or float).\n *\n * Note: `NaN`, `Infinity`, and `-Infinity` are considered invalid.\n *\n * @param {unknown} value - The value to check.\n * @returns {value is number} True if the value is a finite number, otherwise false.\n */\nconst isNumber = (value: unknown): value is number =>\n  typeof value === \"number\" && Number.isFinite(value);\n\nexport {\n  ceil,\n  floor,\n  isFloat,\n  isInteger,\n  isNumber,\n  round,\n  RoundingMode,\n  toInteger,\n  toNumber,\n};\n"],"names":["RoundingMode","toNumber","input","options","_options$roundingMode","_options$digits","roundingMode","NONE","digits","cast","isNumber","parseFloat","String","FLOOR","floor","CEIL","ceil","ROUND","round","num","factor","Math","pow","value","Number","isFinite","isInteger"],"mappings":"AAQA,IAAKA,EAAAA,QAALA,kBAAA,GAAKA,EAAAA,QAAAA,eAAAA,QAAAA,aAKJ,CAAA,IAJC,KAAA,OACAA,EAAA,MAAA,QACAA,EAAA,KAAA,OACAA,EAAA,MAAA,QAGI,IAAAC,EAAW,SACfC,EACAC,GACE,IAAAC,EAAAC,EACIC,EAAoC,OAAxBF,QAAGD,SAAAA,EAASG,cAAYF,EAAIJ,QAAYA,aAACO,KACrDC,SAAMH,EAAGF,MAAAA,OAAAA,EAAAA,EAASK,QAAMH,EAAI,EAE5BI,EAAOC,EAASR,GAASA,EAAQS,WAAWC,OAAOV,IAEzD,IAAIQ,EAASD,GAYX,OAAO,KAXP,OAAQH,GACN,KAAKN,QAAAA,aAAaa,MAChB,OAAOC,EAAML,EAAM,CAAED,OAAAA,IACvB,KAAKR,QAAAA,aAAae,KAChB,OAAOC,EAAKP,EAAM,CAAED,OAAAA,IACtB,KAAKR,QAAYA,aAACiB,MAChB,OAAOC,EAAMT,EAAM,CAAED,OAAAA,IACvB,QACE,OAAOC,EAKf,EAYMS,EAAQ,SACZC,EACAhB,QAAA,IAAAA,IAAAA,EAA8B,CAAEK,OAAQ,IAExC,IAAMY,EAAMC,KAAAC,IAAG,GAAMnB,EAAQK,QAC7B,OAAOa,KAAKH,MAAMC,EAAMC,GAAUA,CACpC,EAEMN,EAAQ,SACZK,EACAhB,QAAA,IAAAA,IAAAA,EAA8B,CAAEK,OAAQ,IAExC,IAAMY,EAAMC,KAAAC,IAAG,GAAMnB,EAAQK,QAC7B,OAAOa,KAAKP,MAAMK,EAAMC,GAAUA,CACpC,EAEMJ,EAAO,SACXG,EACAhB,QAAAA,IAAAA,IAAAA,EAA8B,CAAEK,OAAQ,IAExC,IAAMY,EAAMC,KAAAC,IAAG,GAAMnB,EAAQK,QAC7B,OAAOa,KAAKL,KAAKG,EAAMC,GAAUA,CACnC,EAgCMV,EAAW,SAACa,GAChB,MAAiB,iBAAVA,GAAsBC,OAAOC,SAASF,EAAM,iDAZrC,SAACA,GACf,MAAiB,iBAAVA,IAAuBC,OAAOE,UAAUH,EAAM,oBAZrC,SAACA,SACA,iBAAVA,GAAsBC,OAAOE,UAAUH,EAAM,uDA3CpC,SAACrB,GAAc,OAC/BD,EAASC,EAAO,CAAEI,aAAcN,qBAAaa,OAAQ"}