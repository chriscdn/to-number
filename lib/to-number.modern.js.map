{"version":3,"file":"to-number.modern.js","sources":["../src/index.ts"],"sourcesContent":["/**\n * Converts an unknown value to a numeric type (integer or float).\n * `NaN`, `Infinity`, and `-Infinity` are considered non-numeric and return `null`.\n *\n * @param {unknown} input - The value to convert.\n * @returns {number | null} The numeric value, or `null` if conversion fails.\n */\n\nenum RoundingMode {\n  NONE = \"none\",\n  FLOOR = \"floor\",\n  CEIL = \"ceil\",\n  ROUND = \"round\",\n}\n\ntype Options = {\n  roundingMode?: RoundingMode;\n  digits?: number;\n};\n\nconst toNumber = (\n  input: unknown,\n  options?: Options,\n) => {\n  const roundingMode = options?.roundingMode ?? RoundingMode.NONE;\n  const digits = options?.digits ?? 0;\n\n  const cast = isNumber(input) ? input : parseFloat(String(input));\n\n  if (isNumber(cast)) {\n    switch (roundingMode) {\n      case RoundingMode.FLOOR:\n        return floor(cast, { digits });\n      case RoundingMode.CEIL:\n        return ceil(cast, { digits });\n      case RoundingMode.ROUND:\n        return round(cast, { digits });\n      default:\n        return cast;\n    }\n  } else {\n    return null;\n  }\n};\n\nconst toNumberOrThrow = (\n  input: unknown,\n  options?: Options,\n) => {\n  const result = toNumber(input, options);\n\n  if (isNumber(result)) {\n    return result;\n  } else {\n    throw new TypeError(`Cannot convert ${input} to number.`);\n  }\n};\n\nconst toInteger = (input: unknown) =>\n  toNumber(input, {\n    roundingMode: RoundingMode.FLOOR,\n  });\n\nconst toIntegerOrThrow = (input: unknown) =>\n  toNumberOrThrow(input, {\n    roundingMode: RoundingMode.FLOOR,\n  });\n\n/**\n * Rounds a floating-point number to the specified number of decimal digits.\n *\n * @param {number} num - The number to round.\n * @param {{ digits: number }} [options={ digits: 0 }] - An options object specifying the number of decimal digits to keep.\n * @returns {number} The rounded number.\n */\nconst round = (\n  num: number,\n  options: { digits: number } = { digits: 0 },\n) => {\n  const factor = 10 ** options.digits;\n  return Math.round(num * factor) / factor;\n};\n\nconst floor = (\n  num: number,\n  options: { digits: number } = { digits: 0 },\n) => {\n  const factor = 10 ** options.digits;\n  return Math.floor(num * factor) / factor;\n};\n\nconst ceil = (\n  num: number,\n  options: { digits: number } = { digits: 0 },\n) => {\n  const factor = 10 ** options.digits;\n  return Math.ceil(num * factor) / factor;\n};\n\n/**\n * Checks if the given value is an integer.\n *\n * Note: `NaN`, `Infinity`, and `-Infinity` are considered invalid.\n *\n * @param {unknown} value - The value to check.\n * @returns {value is number} True if the value is a finite integer, otherwise false.\n */\nconst isInteger = (value: unknown): value is number =>\n  typeof value === \"number\" && Number.isInteger(value);\n\n/**\n * Checks if the given value is a floating-point number (non-integer).\n *\n * Note: `NaN`, `Infinity`, and `-Infinity` are considered invalid.\n *\n * @param {unknown} value - The value to check.\n * @returns {value is number} True if the value is a finite float, otherwise false.\n */\nconst isFloat = (value: unknown): value is number =>\n  typeof value === \"number\" && !Number.isInteger(value);\n\n/**\n * Checks if the given value is a finite number (integer or float).\n *\n * Note: `NaN`, `Infinity`, and `-Infinity` are considered invalid.\n *\n * @param {unknown} value - The value to check.\n * @returns {value is number} True if the value is a finite number, otherwise false.\n */\nconst isNumber = (value: unknown): value is number =>\n  typeof value === \"number\" && Number.isFinite(value);\n\nexport {\n  ceil,\n  floor,\n  isFloat,\n  isInteger,\n  isNumber,\n  round,\n  RoundingMode,\n  toInteger,\n  toIntegerOrThrow,\n  toNumber,\n  toNumberOrThrow,\n};\n"],"names":["RoundingMode","toNumber","input","options","_options$roundingMode","_options$digits","roundingMode","NONE","digits","cast","isNumber","parseFloat","String","FLOOR","floor","CEIL","ceil","ROUND","round","toNumberOrThrow","result","TypeError","toInteger","toIntegerOrThrow","num","factor","Math","isInteger","value","Number","isFloat","isFinite"],"mappings":"AAQK,IAAAA,GAAL,SAAKA,GACHA,EAAA,KAAA,OACAA,EAAA,MAAA,QACAA,EAAA,KAAA,OACAA,EAAA,MAAA,OACD,CALD,CAAKA,IAAAA,EAKJ,CAAA,IAOK,MAAAC,EAAWA,CACfC,EACAC,KACEC,IAAAA,EAAAC,EACF,MAAMC,SAAYF,EAAGD,MAAAA,OAAAA,EAAAA,EAASG,cAAYF,EAAIJ,EAAaO,KACrDC,EAAwBH,OAAlBA,EAAU,MAAPF,OAAO,EAAPA,EAASK,QAAMH,EAAI,EAE5BI,EAAOC,EAASR,GAASA,EAAQS,WAAWC,OAAOV,IAEzD,IAAIQ,EAASD,GAYX,OAAO,KAXP,OAAQH,GACN,KAAKN,EAAaa,MAChB,OAAOC,EAAML,EAAM,CAAED,WACvB,KAAKR,EAAae,KAChB,OAAOC,EAAKP,EAAM,CAAED,WACtB,KAAKR,EAAaiB,MAChB,OAAOC,EAAMT,EAAM,CAAED,WACvB,QACE,OAAOC,IAOTU,EAAkBA,CACtBjB,EACAC,KAEA,MAAMiB,EAASnB,EAASC,EAAOC,GAE/B,GAAIO,EAASU,GACX,OAAOA,EAEP,MAAM,IAAIC,UAAU,kBAAkBnB,iBAIpCoB,EAAapB,GACjBD,EAASC,EAAO,CACdI,aAAcN,EAAaa,QAGzBU,EAAoBrB,GACxBiB,EAAgBjB,EAAO,CACrBI,aAAcN,EAAaa,QAUzBK,EAAQA,CACZM,EACArB,EAA8B,CAAEK,OAAQ,MAExC,MAAMiB,EAAS,IAAMtB,EAAQK,OAC7B,OAAOkB,KAAKR,MAAMM,EAAMC,GAAUA,GAG9BX,EAAQA,CACZU,EACArB,EAA8B,CAAEK,OAAQ,MAExC,MAAMiB,EAAS,IAAMtB,EAAQK,OAC7B,OAAOkB,KAAKZ,MAAMU,EAAMC,GAAUA,GAG9BT,EAAOA,CACXQ,EACArB,EAA8B,CAAEK,OAAQ,MAExC,MAAMiB,EAAS,IAAMtB,EAAQK,OAC7B,OAAOkB,KAAKV,KAAKQ,EAAMC,GAAUA,GAW7BE,EAAaC,GACA,iBAAVA,GAAsBC,OAAOF,UAAUC,GAU1CE,EAAWF,GACE,iBAAVA,IAAuBC,OAAOF,UAAUC,GAU3ClB,EAAYkB,GACC,iBAAVA,GAAsBC,OAAOE,SAASH"}